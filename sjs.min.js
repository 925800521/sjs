/**sjs v1.1  zhangwen  71752352@qq.com  licence*/
(function(W,undefined){var D=W.document,_$$=W.$?W.$:undefined,wn=W.navigator,wl=W.location,ua=wn.userAgent.toLowerCase(),av=wn.appVersion,AP=Array.prototype,RAF=W.requestAnimationFrame||W.mozRequestAnimationFrame||W.webkitRequestAnimationFrame||W.msRequestAnimationFrame||W.oRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},sh=/^[^<]*(<[\w\W]+>)[^>]*$|^#([\w-]+)$/,DS={},type=function(t){return t!=undefined?Object.prototype.toString.call(t).slice(8,-1):"undefined"},UT={noConflict:function(){if(_$$){W.$=_$$}},uniqueId:function(){var t=(new Date).getTime(),e=parseInt(Math.random()*1e4);return t*1e4+e},type:type,isArray:function(t){return type(t)==="Array"},isBoolean:function(t){return type(t)==="Boolean"},isString:function(t){return type(t)==="String"},isFunction:function(t){return type(t)==="Function"},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},isXML:function(t){var e=t.ownerDocument||t;return e.createElement("p").nodeName!==e.createElement("P").nodeName},isPlainObject:function(t){return type(t)==="Object"},isEmptyObject:function(t){var e;for(e in t){return false}return true},isEmptyString:function(t){return/^\s*$/gi.test(t)},trim:function(t){return t.replace(/(^\s*)|(\s*$)/g,"")},each:function(t,e){if(t.forEach){t.some(function(t,n,i){return e.call(i,n,t)})}else{for(var n in t){if(t[n]!=undefined){if(e.call(t,n,t[n])===false){break}}}}},grep:function(t,e,n){var i=new t.constructor,r=n===true?false:true;if(t&&e){UT.each(t,function(n,s){if(e.call(t,s,n)===r){i.push(s)}})}return i},merge:function(t,e){var n=[t.length,0].concat(e);AP.splice.apply(t,n);return t},map:function(t,e){if(t&&e){var n=[];for(var i=0,r=t.length;i<r;i++){var s=e.call(t,t[i],i);if(s==null){return true}if(UT.isArray(s)){UT.merge(n,s)}else{n.push(s)}}t=n}return t},inArray:function(t,e){if(AP.indexOf){return AP.indexOf.call(e,t)}else{for(var n=0,i=e.length;n<i;n++){if(e[n]==t){return n}}}return-1},unique:uniqd,remove:function(t,e,n){var i=e;if(n===true){i=null;for(var r in t){if(t[r]==e){i=r;break}}}if(i!==undefined&&i!==null){if(UT.isArray(t)){t.splice(i,1)}if(UT.isPlainObject(t)){delete t[i]}}return t},data:function(t,e,n){return M(t).data(e,n)},JSON:{parse:function(d){if(typeof d!=="string"||!d){return null}d=UT.trim(d);return W.JSON?JSON.parse(d):eval(d)},stringify:function(t){if(!t){return""}if(W.JSON){return W.JSON.stringify(t)}var e=[],n="";switch(type(t)){case"Array":for(var i=0;i<t.length;i++){e.push(this.stringify(t[i]))}n="["+e.join(",")+"]";break;case"Date":n="new Date("+t.getTime()+")";break;case"RegExp":case"Function":n=t.toString();break;case"Object":for(var i in t){t[i]=typeof t[i]=="string"?'"'+t[i]+'"':typeof t[i]==="object"?this.stringify(t[i]):t[i];e.push(i+":"+t[i])}n="{"+e.join(",")+"}";break}return n},parseQuery:function(t){var e={};var n=t.split("&");for(var i=0,r=n.length;i<r;i++){if(n[i].indexOf("=")>-1){var s=n[i].split("=");if(!/^\s*$/gi.test(e[0])){var a=s[1].trim();if(a=="null"||a=="undefined"){a=""}e[s[0]]=a}}}return e},toQuery:function(t){var e="";for(var n in t){e+=UT.isEmptyString(e)?"":"&";var i=t[n]==null?"":t[n];e+=n+"="+i}return e},count:function(t){var e=0;for(var n in t){e++}return e}},raf:function(t,e){var n=(new Date).getTime(),i=Math.ceil(1e3/t),r=0,s=0,a=AP.slice.call(arguments,2);a.unshift(s);instance=this;function u(){if(r<2){var t=(new Date).getTime();var o=t-n;if(o>=i){n=t;s++;a[0]=s;if(e.apply(instance,a)===false){return}}RAF(u)}}this.sign=null;this.start=function(){if(r==0){r=1;RAF(u)}};this.pause=function(){if(r==1){r=2}};this.resume=function(){if(r==2){r=1;RAF(u)}};this.stop=function(){r=3}}},M=function(t,e){return new M.fn.init(t,e)};M.fn=M.prototype={constructor:M,selector:"",sjs:"sjs",length:0,init:function(t,e){if(W==this){return new M(t,e)}this.context=e?e:D;if(t){if(isS(t)){return t}if(UT.isFunction(t)){D.addEventListener("DOMContentLoaded",function(e){t.call(W,M)},false)}if(t.nodeType||t==W){this[0]=t;this.length=1;id(t)}if(UT.isArray(t)){UT.merge(this,t)}if(typeof t==="string"){var n;if((n=sh.exec(t))&&n[1]){return M(cds(n[1]))}else{n=this.context.querySelectorAll(t);this.length=n.length;for(var i=0,r=this.length;i<r;i++){id(n[i]);this[i]=n[i]}this.selector=t}}}},size:function(){return this.length},get:function(t){return t==undefined?this:this[t]},index:function(){var t=this[0],e=t.parentNode.children;return M.inArray(t,e)}};M.fn.init.prototype=M.fn;M.extend=M.fn.extend=function(){var t=arguments[0]||{},e,n=arguments.length,i=false,r=0,s,a;if(typeof t==="boolean"){r++;i=true;t=arguments[r]||{}}if(typeof t!="object"){t={}}if(n==r+1){t=this}for(;r<n;r++){if((e=arguments[r])!=null){for(var u in e){s=t[u];a=e[u];if(t==a){continue}if(i&&a&&(UT.isArray(a)||UT.isPlainObject(a))){if(UT.isPlainObject(a)){s=s&&UT.isArray(s)?s:{}}if(UT.isArray(a)){s=s&&UT.isPlainObject(s)?s:[]}t[u]=M.extend(i,s,a)}else{t[u]=a}}}}return t};function ajaxcall(xhr,s){if(!s||!xhr){return false}if(s.success){xhr.onload=function(e){var res=null;switch(s.dataType){case"json":case"script":res=eval(this.responseText);break;default:res=this.response;break}s.success.call(s.context,res,this)}}if(s.abort){xhr.onabort=function(t){s.abort.call(s.context,this)}}if(s.error){xhr.onerror=function(t){s.error.call(s.context,this)}}if(s.beforeSend){xhr.onloadstart=function(t){s.beforeSend.call(s.context,this)}}if(s.complete){xhr.onloadend=function(t){s.complete.call(s.context,this)}}if(s.progress){xhr.onprogress=function(t){s.progress.call(s.context,t)}}if(s.upProgress){xhr.upload.onprogress=function(t){s.upProgress.call(s.context,t)}}}function ba(t,e){e=e?e:" ";return t==undefined?t:M.isArray(t)?t:t.split(e)}function cds(t,e){var n=D.createElement("div");n.innerHTML=t;if(e===true){var i=D.createDocumentFragment(),r=n.firstChild;while(r){var s=r,r=r.nextSibling;i.appendChild(s)}return i}else{return AP.slice.call(n.children,0)}}function cnes(t){t.replace(/([A-Z])/g,"-$1").toLowerCase();return t.replace(/^(webkit-|moz-|o-|ms-)/,"-$1")}function cne(t){return t.replace(/-[a-z]/gi,function(t){return t.charAt(1).toUpperCase()})}function dc(t,e){if(e&&hc(t,e)){var n=new RegExp("(\\s|^)"+e);t.className=t.className.replace(n,"")}}function dd(t,e){var n=id(t),i=DS[n]||undefined;if(i){if(e){if(DS[n][e]){delete DS[n][e]}}else{delete DS[n]}}}function dir(t,e,n,i){var r=[],s=t[e];while(s&&s.nodeType!==9&&(!n||s.nodeType!==1||!M(s).is(n))){if(s.nodeType===1){if(i){return s}r.push(s)}s=s[e]}return r}function diru(t,e,n,i){var r=[],s=0,a=e.length,u;for(;s<a;s++){M.merge(r,dir(e[s],t,n))}u=M(uniqd(r));return i?u.filter(i):u}function dirs(t,e,n){var i=[],r=0,s=e.length,a;for(;r<s;r++){var u=e[r][t];u&&i.push(u)}a=M(uniqd(i));return n?a.filter(n):a}function gc(t,e){return W.getComputedStyle(t).getPropertyValue(cnes(e))||""}function gd(t,e){var n=id(t),i=DS[n]||undefined;return e==undefined?i:i&&i[e]!=undefined?i[e]:undefined}function gh(t){if(t.outerHTML){return t.outerHTML}var e=D.createElement("div");e.appendChild(t.cloneNode(true));return e.innerHTML}function hc(t,e){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");return n.test(t.className)}function id(t,e){return e||!t._hash?t._hash=UT.uniqueId():t._hash}function isS(t){return t&&t!=W&&t.sjs!=undefined}function stodf(t){var e=D.createDocumentFragment();for(var n=0;n<t.length;n++){t[n]}return e}function dom(t,e,n){if(e&&t.length>0){var i=M.isFunction(e),r=M.isString(e),s=isS(e),a=!r&&!i?M(e):null,u=[];t.each(function(t,r){var o=n>1?t.parentNode:null;if(a){var f=r>0?a.clone(true):a,c=D.createDocumentFragment();f.each(function(t){c.appendChild(t)});n==1&&t.insertBefore(c,t.firstChild)||n==2&&o&&(o.lastChild==t&&o.appendChild(c)||o.insertBefore(c,t.nextSibling))||n==3&&o&&o.insertBefore(c,t)||n==4&&o&&o.replaceChild(c,t)||t.appendChild(c);s&&r>0&&u.push(f)}else{var l=i?e.call(t,r,t.innerHTML):e,l=n>1?cds(e,true):l;n==1&&(t.innerHTML=l+t.innerHTML)||n==2&&o&&(o.lastChild==t&&o.appendChild(l)||o.insertBefore(l,t.nextSibling))||n==3&&o&&o.insertBefore(l,t)||n==4&&o&&o.replaceChild(l,t)||(t.innerHTML+=l)}});if(s){for(var o=0;o<u.length;o++){e.add(u[o])}}}return t}function sd(t,e,n){var i=id(t);if(!DS[i]){DS[i]={}}DS[i][e]=n}function uniq(t){var e={},n=[];for(var i=0;i<t.length;i++){e[t[i]]=t[i]}M.each(e,function(t,e){n.push(e)});return n}function uniqd(t){var e=[],n={},i=0,r=t.length;for(;i<r;i++){var s=t[i],a=id(s);if(!n[a]){n[a]=true;e.push(s)}}return e}var DOMS={data:function(t,e){if(this.length>0){return e?this.each(function(n){sd(n,t,e)}):gd(this[0],t)}return this},removeData:function(t){if(M.isString(t)&&!M.isEmptyString(t)){t=t.split(" ")}return this.each(function(e){if(M.isArray(t)){M.each(t,function(t,n){dd(e,n)})}else{dd(e)}})},html:function(t){if(this.length==0){return this}if(t==undefined){return this[0].innerHTML}var e=M.isString(t)?t:null,n=M.isFunction(t);return this.each(function(i,r){if(n){e=t.call(this,r,this.innerHTML);if(!e){return true}}this.innerHTML=e})},htmls:function(){var t="";this.each(function(e){t+=gh(e)});return t},val:function(t){return this.length==0?undefined:t==undefined?this[0].value||"":this.each(function(e,n){if(M.isFunction(t)){var i=t.call(e,n,e.value);if(i!=undefined){e.value=i}}else{e.value=t}})},text:function(t){if(t){return this.each(function(e,n){if(M.isFunction(t)){var i=t.call(e,n,e.textContent);if(i!=undefined){e.textContent=i}}else{e.textContent=t}})}else{var e="";this.each(function(t){e+=t.textContent});return e}},css:function(t,e){if(t==undefined){return undefined}if(this.length==0){return this}if(M.isString(t)){var n=M.isFunction(e);return e==undefined?gc(this[0],t):this.each(function(i,r){var s=n?e.call(this,r,gc(this,t)):e;s=/height|width|left|right|top|bottom|size/i.test(t)&&M.isNumeric(s)?s+"px":s;t=cne(t);i.style[t]=s})}if(M.isPlainObject(t)){var i=this;M.each(t,function(t,e){i.css(t,e)})}return this},save:function(){return this.each(function(t){var e=gd(t,"cstack")||[];e.push({ct:t.style.cssText,cn:t.className});sd(t,"cstack",e)})},restore:function(){return this.each(function(t){var e=gd(t,"cstack")||[];if(e.length>0){var n=e.pop();t.style.cssText=n.ct;t.className=n.cn;sd(t,"cstack",e)}})},attr:function(t,e){if(t){if(e){if(M.isFunction(e)){this.each(function(n,i){var r=n.getAttribute(t),s=e.call(n,i,r);if(s!=undefined){n.setAttribute(t,s)}})}else{this.each(function(n){n.setAttribute(t,e)})}}else{if(M.isString(t)){return this[0].getAttribute(t)}else if(M.isPlainObject(t)){this.each(function(e){M.each(t,function(t,n){e.setAttribute(t,n)})})}}}return this},removeAttr:function(t){return this.each(function(e){e.removeAttribute(t)})},getBox:function(){if(W.HTMLElement&&!("getBoundingClientRect"in HTMLElement)){var t=D.documentElement.scrollTop,e=D.documentElement.scrollLeft,n=this[0].offsetLeft,i=this[0].offsetTop,r=this[0].offsetParent;while(r!=null){n+=r.offsetLeft;i+=r.offsetTop;r=r.offsetParent}return{left:n-e,right:n+this[0].offsetWidth-e,top:i-t,bottom:i+this[0].offsetHeight-t,width:this[0].offsetWidth,height:this[0].offsetHeight}}else{var s=this[0].getBoundingClientRect();return{left:s.left,right:s.right,top:s.top,bottom:s.bottom,width:s.right-s.left,height:s.bottom-s.top}}},inBox:function(t,e){var n=false,t=parseInt(t),e=parseInt(e);this.each(function(i,r){var s=M(this).getBox();n=s.left<=t&&s.right>=t&&s.top<=e&&s.bottom>=e;if(n==true){return false}});return n},each:function(t,e){if(e===true){for(var n=this.length-1;n>=0;n--){if(t.call(this[n],this[n],n)===false){return this}}}else{for(var n=0;n<this.length;n++){if(t.call(this[n],this[n],n)===false){return this}}}return this},addClass:function(t){if(t==undefined||this.length==0){return this}var e=M.isFunction(t)?null:ba(t);return this.each(function(n,i){var r=M.trim(n.className);if(e==null){var s=t.call(n,i,r);if(s&&!hc(n,s)){n.className=r+" "+s}}else{M.each(e,function(t,e){r=M.trim(n.className);if(e&&!hc(n,e)){n.className=r+" "+e}})}})},removeClass:function(t){if(this.length==0){return this}var e=M.isFunction(t)?null:ba(t);return this.each(function(n,i){if(t==undefined){return n.className=""}var r=M.trim(n.className);if(e==null){var s=t.call(n,i,r);if(s&&hc(n,s)){dc(n,s)}}else{M.each(e,function(t,e){dc(n,e)})}})},toggleClass:function(t){if(t==undefined||this.length==0){return this}var e=M.isFunction(t)?null:ba(t);return this.each(function(n,i){var r=M.trim(n.className),s="";if(e==null){if(s=t.call(n,i,r)){if(hc(n,s)){dc(n,s)}else{n.className=r+" "+s}}}else{M.each(e,function(t,e){r=M.trim(n.className);if(hc(n,e)){dc(n,e)}else{n.className=r+" "+e}})}})},eq:function(t){t=t<0?this.length+t:t;return M(this.get(t))},hasClass:function(t){var e=false;this.each(function(n){return!(e=hc(n,t))});return e},filter:function(t,e){var n=M.isFunction(t),i=!n?M(t):null;for(var r=this.length-1;r>=0;r--){if(n&&(!e&&!t.call(this[0],r)||e&&t.call(this[0],r))||i&&(!e&&M.inArray(this[r],i)<0||e&&M.inArray(this[r],i)>-1)){AP.splice.call(this,r,1)}}return this},not:function(t){return this.filter(t,true)},slice:function(t,e){var n=t==undefined?0:t<0?this.length+t:t,i=e==undefined?this.length:e;for(var r=this.length-1;r>=0;r--){if(r>=e&&r<=t){AP.splice.call(this,r,1)}}return this},is:function(t){return this.filter(t).length>0},has:function(t){var e=this;if(M.isString(t)){return this.filter(function(n){return M(t,e[n]).length>0})}else{if(t.sjs){t=t[0]}return this.filter(function(n){var i=M("*",e[n]).get();return M.inArray(t,i)>-1})}},find:function(t,e){var n=[];this.each(function(i){var r=i.querySelectorAll(t);for(var s=0;s<r.length;s++){(!e||r[s].parentNode==i)&&n.push(r[s])}});return M(uniqd(n))},children:function(t){var e=!t?"*":t;return this.find(e)},parentsUntil:function(t,e){return diru("parentNode",this,t,e)},parent:function(t){return dirs("parentNode",this,t)},parents:function(t){return this.parentsUntil(null,t)},closest:function(t){var e=[],n;for(var i=this.length-1;i>=0;i--){var r=this[i],s;if(M(r).is(t)){e.push(r)}else{s=dir(this[i],"parentNode",null,true);s.nodeType&&e.push(s)}}n=M(uniqd(e));return t?n.filter(t):n},nextUntil:function(t,e){return diru("nextElementSibling",this,t,e)},next:function(t){return dirs("nextElementSibling",this,t)},nextAll:function(t){return this.nextUntil(null,t)},prevUntil:function(t,e){return diru("previousElementSibling",this,t,e)},prev:function(t){return dirs("previousElementSibling",this,t)},prevAll:function(t){return this.prevUntil(null,t)},siblings:function(t){return this.nextAll(t).add(this.prevAll(t))},add:function(t){var e=this;M(t).each(function(t){AP.push.call(e,t)});return M(uniqd(this))},append:function(t){return dom(this,t)},appendTo:function(t){dom(M(t),this);return this},prepend:function(t){return dom(this,t,1)},prependTo:function(t){dom(M(t),this,1);return this},after:function(t){return dom(this,t,2)},before:function(t){return dom(this,t,3)},insertBefore:function(t){dom(M(t),this,3);return this},insertAfter:function(t){dom(M(t),this,2);return this},replaceWith:function(t){return dom(this,t,4)},replaceAll:function(t){dom(M(t),this,4);return this},clone:function(t){var e=this,n=M(this.htmls()),i=ES.data;return n.each(function(t,n){var r=M(t);for(var s in i){var a=id(e[n]),u=i[s]?i[s][a]:null;if(/swipe|tap/i.test(s)){u&&(i[s][id(t)]=u)}else{u&&u.forEach(function(t){r.on(s,t.data,t.fn)})}}})},empty:function(){return this.html("")},remove:function(t){return this.each(function(e){var n=M(e),i=ES.data;if((!t||n.is(t))&&e.parentNode){for(var r in i){i[r][id(e)]&&n.off(r)}e.parentNode.removeChild(e)}})}},AJAXS={ajax:function(t,e){var n={async:true,cache:false,type:"GET",dataType:"html",mime:"text/html",data:{},charset:"utf-8",contentType:"application/x-www-form-urlencoded",context:e,progress:null,upProgress:null,beforeSend:null,success:null,abort:null,error:null,complete:null};if(!M.isString(t)){return false}var i=(new Date).getTime(),n=e?M.extend(n,e):n,r=new XMLHttpRequest,t=t.indexOf("?")>-1?t+"&":t+"?",s=n.data;t+=n.cache?"":"_t="+i;if(n.type.toLowerCase()=="get"){t+=M.JSON.toQuery(n.data);s=null}if(n.dataType=="blod"||n.dataType=="arraybuffer"){r.responseType=n.dataType}if(r){ajaxcall(r,n);r.open(n.type,t,n.async);r.setRequestHeader("Accept",n.mime);r.setRequestHeader("Content-Type",n.contentType+"; charset="+n.charset+"");r.send(s)}else{if(M.isFunction(n.error)){n.error("ajax不被支持！")}}return r},ajaxForm:function(t,e){$(t).each(function(t){if(t.nodeName.toLowerCase()=="form"){var n=new FormData(t),i=new XMLHttpRequest;if(e&&e.data){for(var r in e.data){n.append(r,e.data[r])}}ajaxcall(i,e);i.open(t.method,t.action);i.send(n)}})},get:function(t,e,n,i){if(!t){return false}var r=e,s=n,a=i;if(M.isFunction(r)){a=s;s=r;r=null}return M.ajax(t,{success:s,data:r,dataType:a||"html"})},getJSON:function(t,e,n){if(!t){return false}var i=e,r=n;if(M.isFunction(i)){r=i;i=null}return M.ajax(t,{success:r,data:i,dataType:"json"})},getScript:function(t,e){if(!t){return false}var n=document.createElement("script");n.async=true;n.src=t;n.onload=e;document.body.appendChild(n)},post:function(t,e,n,i){if(!t){return false}var r=e,s=n,a=i;if(M.isFunction(r)){a=s;s=r;r=null}return M.ajax(t,{type:"post",success:s,data:r,dataType:a})}},gwe=function(t){try{if(W.external&&W.external[t]){var e=W.external[t];return UT.isFunction(e)?e():e}}catch(n){}return""},bs={isAndroid:/Android/i.test(ua),isIPad:/ipad/i.test(ua),isIPhone:/iphone os/i.test(ua),isWMobile:/Windows mobile/i.test(ua),isMobile:/mobile|wap/.test(ua),isIECore:/Trident/i.test(ua),isWebkitCore:/webkit/i.test(ua),isGeckosCore:/Gecko/i.test(ua)&&!/khtml/i.test(ua),se360:function(){var t=/360se/i.test(ua)||/360ee/i.test(ua);return t?t:/360se/i.test(gwe("twGetRunPath"))}(),sougou:/MetaSr/i.test(ua),qq:/QQBrowser/i.test(ua),maxthon:function(){return gwe("max_version").substr(0,1)>0}(),opera:W.opera?true:false,firefox:/Firefox/i.test(ua),uc:/ucweb/i.test(ua),liebao:/LBBROWSER/i.test(ua),baidu:/BIDUBrowser/i.test(ua)||gwe("GetVersion")=="baidubrowser"},nogc=!bs.sougou&&!bs.maxthon&&!bs.qq&&!bs.uc&&!bs.liebao&&!bs.baidu&&!bs.se360;bs.ie=bs.isIECore&&nogc;bs.chrome=/Chrome/i.test(ua)&&W.chrome&&nogc;bs.safari=/Safari/.test(ua)&&!bs.chrome&&nogc;bs.prefix=bs.isWebkitCore?"webkit":bs.isGeckosCore?"Moz":bs.opera?"O":bs.isIECore?"ms":"";bs.hasTouch="ontouchstart"in W;var SET={vmousecancel:bs.hasTouch?"touchcancel":"mouseout",vmousedown:bs.hasTouch?"touchstart":"mousedown",vmousemove:bs.hasTouch?"touchmove":"mousemove",vmouseup:bs.hasTouch?"touchend":"mouseup",vmouseout:bs.hasTouch?"touchleave":"mouseout"},tap,sx,sy,px,py,target,lto=800,lt=null,st,gtapdown=function(t){tap=true;var e=t.touches?t.touches[0]:t;sx=px=e.pageX;sy=py=e.pageY;st=Date.now();lt=setInterval(function(){if(lt&&Date.now()-st>lto){clearInterval(lt);lt=null;t.stopPropagation=function(){this._sbunble=true};ES.touchs.forEach(function(e,n){!t._sbunble&&M.Event.trigger.call(e,t,"longTap")})}},200);M(document).on("vmousemove",gtapmove)},gtapmove=function(t){if(lt){clearInterval(lt);lt=null}if(tap){var e=t.touches?t.touches[0]:t,n=e.pageX,i=e.pageY,r=Math.abs(n-px),s=Math.abs(i-py);if(r<ES.swipeStep&&s<ES.swipeStep){return}target=r>s?n>sx?"right":"left":i>sy?"down":"up";px=n;py=i;ES.touchs.forEach(function(e,r){t.movement={startx:sx,starty:sy,x:n,y:i,target:target};M.Event.trigger.call(e,t,"swipe")})}},gtapup=function(t){t.stopPropagation=function(){this._sbunble=true};if(lt){clearInterval(lt);lt=null;ES.touchs.forEach(function(e,n){!t._sbunble&&M.Event.trigger.call(e,t,"tap")})}else if(target){t.movement={startx:sx,starty:sy,x:px,y:py,target:target};ES.touchs.forEach(function(e,n){!t._sbunble&&M.Event.trigger.call(e,t,"swipeEnd")})}ES.touchs=[];tap=false;M(document).off("vmousemove",gtapmove)},initTouch=function(){M(document).on("vmousedown",gtapdown).on("vmouseup",gtapup)},tapdown=function(t){t.preventDefault();ES.touchs.push(this)},tapout=function(t){if(tap&&M(t.relatedTarget).parents(this).length==0){M.Event.trigger.call(this,t,"swipeEnd");UT.remove(ES.touchs,this)}},ES={swipeStep:2,swipeCheckOut:false,touchs:null,lives:{},data:{},trigger:function(t,e,n){e=e?e:t.type;var i=n?n:id(this),r=i?i:this,s=n?ES.lives:ES.data,a=s[e]?s[e][i]:null;if(a){for(var u=0,o=a.length;u<o;u++){var f=a[u];t.firecnt=++f.cnt;t.data=f.data;if(f.fn.call(this,t)===false){ES.remove(e,r,f.fn);u--;o--}}}},live:function(t){var e=t.type,n=t.target,i=M(n),r=i.add(i.parentsUntil(document.body)),s=ES.lives[e]||[],a={};t.stopPropagation=function(){this._sbunble=true};for(var u in s){a[u]=M(u)}r.each(function(e){if(t._sbunble){return false}M.each(a,function(n,i){M(e).is(i)&&ES.trigger.call(e,t,null,n)})})},add:function(t,e,n,i){var r=e,s=ES.lives;if(typeof e!="string"){r=id(e);s=ES.data;if(/swipe|tap/i.test(t)){if(ES.touchs==null){ES.touchs=[];initTouch()}var a=M(e);if(!a.data("tapinit")){a.on("vmousedown",tapdown).data("tapinit",true);ES.swipeCheckOut&&a.on("vmouseout",tapout)}}else{e.addEventListener(t,ES.trigger,false)}}else{if(!s[t]){document.addEventListener(t,ES.live,false)}}!s[t]&&(s[t]={});!s[t][r]&&(s[t][r]=[]);s[t][r].push({cnt:0,data:n,fn:i})},remove:function(t,e,n,i){if(!t||!e){return}var r=i?e:id(e),s=i?this.lives:this.data;if(n==undefined){s[t]&&s[t][r]&&delete s[t][r]}else{if(s[t]&&s[t][r]){var a=s[t][r];for(var u=0,o=a.length;u<o;u++){if(a[u]["fn"]==n){s[t][r].splice(u,1);u--;o--}}s[t][r].length==0&&delete s[t][r]}}s[t]&&M.JSON.count(s[t])==0&&delete s[t];if(i){if(!s[t]){document.removeEventListener(t,this.live,false);return}}else{if(/swipe|tap/i.test(t)){if(!s["tap"]&&!s["longTap"]&&!s["swipe"]){M(e).off("vmousedown",tapdown).off("vmouseout",tapout).data("tapinit",false)}}else{if(!s[t]||!s[t][r]){e.removeEventListener(t,this.trigger,false)}}}}};UT.each(["live","die","bind","unbind","on","off","delegate","undelegate","one","trigger"],function(t,e){M.fn[e]=function(t,n,i){if(!t){return this}n&&!i&&(i=n)&&(n=undefined);var r=t.split(" "),s=this.selector;for(var a=0,u=r.length;a<u;a++){var o=r[a];o=SET[o]?SET[o]:o;switch(e){case"live":if(!s){return this}ES.add(o,s,n,i);break;case"die":if(!s){return this}ES.remove(o,s,i,true);break;default:for(var a=0,u=this.length;a<u;a++){s=this[a];switch(e){case"bind":case"on":case"delegate":if(!i){return this}ES.add(o,s,n,i);break;case"unbind":case"off":case"undelegate":ES.remove(o,s,i);break;case"one":ES.add(o,s,n,function(){i.call(this,arguments[0]);return false});break;case"trigger":var f=document.createEvent("Events");f.initEvent(o,true,true);s.dispatchEvent(f);break}}break}}return this}});M.Event=ES;var atimer=null,_AS={},_apre=bs.prefix?bs.prefix+"Transition":"transition",ntdelay=_apre+"Delay",ntp=_apre+"Property",ntd=_apre+"Duration",nttf=_apre+"TimingFunction",speed={slow:1e3,normal:600,fast:300},gfx=function(t){var e=id(t),n=_AS[e];if(n==undefined){var i=t.style,r={};r[ntp]=i[ntp];r[ntd]=i[ntd];r[nttf]=i[nttf];r[ntdelay]=i[ntdelay];return{dom:t,oldt:r,t:0,stacks:[]}}return _AS[e]},ANIMS={isAnimate:function(){var t=false;this.each(function(e){if(_AS[id(e)]){t=true;return false}});return t},delay:function(t){if(M.isNumeric(t)){this.each(function(e){var n=gfx(e);n.stacks.push({dur:t});_AS[id(e)]=n})}this._run();return this},stop:function(t){t=t===false?false:true;this.each(function(e){var n=id(e);if(!_AS[n]){return false}if(t){var i=e.style;for(var r=i.length-1;r>=0;r--){e.style[i[r]]=gc(e,i[r])}}else{var s=_AS[n],a=s?s.stacks.length:0,u={};for(var r=0;r<a;r++){if(s.stacks[r].tran){M.extend(u,s.stacks[r].tran)}}M(e).css(u)}M(e).css(_apre,"");_AS[n].stacks=[]});return this},animate:function(t,e,n,i){if(!M.isPlainObject(t)||M.isEmptyObject(t)){return this}var r=type(e),s=type(n),a=e==undefined||r!="String"&&r!="Number"?"normal":e,u=n==undefined||s!="String"?"ease":n,o=r=="Function"?e:s=="Function"?n:i;if(r=="Object"){a=e.speed?e.speed:a;u=e.easing?e.easing:u;o=e.callback?e.callback:o}a=M.isString(a)?speed[a]||speed["normal"]:a;u=u=="swing"?"ease-in-out":u;this.each(function(e){var n=gfx(e),i={};i[ntp]="all";i[ntd]=a/1e3+"s";i[nttf]=u;M.extend(i,t);n.stacks.push({dur:a,tran:i,fn:o});_AS[id(e)]=n});this._run();return this},_run:function(){if(atimer==null){atimer=new UT.raf(20,function(t){var t=0;M.each(_AS,function(e,n){if(n.stacks.length==0){M(n.dom).css(n.oldt);delete _AS[e]}else{var i=n.stacks[0];if(n.t==0){n.t=Date.now();if(i.tran!=undefined){M(n.dom).css(i.tran)}}else{if(Date.now()-n.t>=i.dur){if(i.fn){i.fn.call(n.dom)}n.t=0;_AS[e].stacks.shift()}}}t++});if(t==0){this.stop();atimer=null}});atimer&&atimer.start()}}},animExt=function(t,e,n,i,r){if(t.isAnimate()){return false}t.each(function(s){var a=$(s),u=a.data("sjs_aext"),o=a.css("display"),f={overflow:"hidden"},c={},l="none";if(!u){a.save();a.css({display:"block"});u=a.getBox();u.dis=o=="none"?"block":o;a.restore();a.data("sjs_aext",u)}e=e=="slideToggle"?o=="none"?"slideDown":"slideUp":e=="fadeToggle"?o=="none"?"fadeIn":"fadeOut":e=="spreadToggle"?o=="none"?"spreadRight":"spreadLeft":e;switch(e){case"slideUp":f.height=u.height;c.height=0;break;case"slideDown":if(o!="none"){return t}f.height=0;f.display=l=u.dis;c.height=u.height;break;case"spreadLeft":f.width=u.width;c.width=0;break;case"spreadRight":if(o!="none"){return t}f.width=0;f.display=l=u.dis;c.width=u.width;break;case"fadeIn":if(o!="none"){return t}f.opacity=0;f.display=l=u.dis;c.opacity=1;break;case"fadeOut":f.opacity=1;c.opacity=0;break}a.save();a.css(f).animate(c,n,i,function(){a.restore();a.css("display",l);if(r){r.call(s)}})});return t};UT.each(["slideDown","slideUp","slideToggle","spreadRight","spreadLeft","spreadToggle","fadeIn","fadeOut","fadeToggle"],function(t,e){M.fn[e]=function(t,n,i){return animExt(this,e,t,n,i)}});var SED=M.extend({},UT,{browser:bs},AJAXS),ED=M.extend(DOMS,ANIMS);M.extend(SED);M.fn.extend(ED);W.sjs=W.$=M})(window);
